ðŸ“Š ESTRUTURA DE ARMAZENAMENTO DE BIOMETRIAS
============================================

1. LOCAL (SQLite - biometric.db)
   â””â”€ Banco de dados arquivo: bin\Release\net8.0-windows\win-x64\biometric.db
   
   Tabelas:
   â”œâ”€ Biometrias (armazena as capturas)
   â”‚  â”œâ”€ Id (UUID)
   â”‚  â”œâ”€ CooperadoId (UUID do cooperado)
   â”‚  â”œâ”€ CooperadoNome (nome do cooperado)
   â”‚  â”œâ”€ FingerIndex (dedo: 0)
   â”‚  â”œâ”€ Hash (SHA256 do template)
   â”‚  â”œâ”€ Template (BLOB - dados biomÃ©tricos em bytes)
   â”‚  â”œâ”€ CreatedAt (data/hora de captura)
   â”‚  â”œâ”€ SyncedToNeon (0=nÃ£o sincronizado, 1=sincronizado)
   â”‚  â””â”€ LastSyncTime (Ãºltima sincronizaÃ§Ã£o)
   â”‚
   â”œâ”€ Pontos (registra entrada/saÃ­da)
   â”‚  â”œâ”€ Id (UUID)
   â”‚  â”œâ”€ Codigo (cÃ³digo relacionado Ã  entrada)
   â”‚  â”œâ”€ CooperadoId (UUID do cooperado)
   â”‚  â”œâ”€ CooperadoNome (nome do cooperado)
   â”‚  â”œâ”€ Timestamp (data/hora do registro)
   â”‚  â”œâ”€ Tipo (ENTRADA ou SAIDA)
   â”‚  â”œâ”€ Local (hospital - setor)
   â”‚  â”œâ”€ HospitalId (UUID do hospital)
   â”‚  â”œâ”€ SetorId (ID do setor)
   â”‚  â”œâ”€ Status (status do registro)
   â”‚  â”œâ”€ IsManual (0=biomÃ©trico, 1=manual)
   â”‚  â”œâ”€ RelatedId (ID da entrada relacionada)
   â”‚  â”œâ”€ SyncedToNeon (0=nÃ£o sincronizado, 1=sincronizado)
   â”‚  â””â”€ LastSyncTime (Ãºltima sincronizaÃ§Ã£o)
   â”‚
   â”œâ”€ Setores (cache de setores do hospital)
   â”‚  â”œâ”€ Id (ID do setor)
   â”‚  â”œâ”€ Nome (nome do setor)
   â”‚  â”œâ”€ HospitalId (UUID do hospital)
   â”‚  â””â”€ LastSyncTime (data da sincronizaÃ§Ã£o)
   â”‚
   â””â”€ Employees (compatibilidade - pode estar vazio)
      â””â”€ (Estrutura legada)

2. CLOUD (PostgreSQL Neon)
   â””â”€ Host: ep-dry-dawn-ahl0dlm6-pooler.c-3.us-east-1.aws.neon.tech
   
   Tabelas principais:
   â”œâ”€ biometrias (cÃ³pia das biometrias locais)
   â”‚  â””â”€ Sincronizado automaticamente em background
   â”‚
   â”œâ”€ pontos (cÃ³pia dos registros de entrada/saÃ­da)
   â”‚  â””â”€ Sincronizado automaticamente em background
   â”‚
   â””â”€ cooperados (lista de funcionÃ¡rios)
      â””â”€ Id, Nome, CPF, Email, etc.

3. FLUXO DE CAPTURA E ARMAZENAMENTO:
   
   a) Captura de Biometria:
      1. UsuÃ¡rio coloca dedo no leitor
      2. FingerprintService captura via SDK DigitalPersona
      3. Gera template em bytes (1632 bytes)
      4. Armazena em variÃ¡vel _biometriaCapturada
      
   b) Registro de Biometria (CadastrarBiometriaForm):
      1. Template â†’ SalvarBiometriaLocal(template)
      2. Insere em Biometrias tabela SQLite
      3. Envia para NEON async em background
      
   c) VerificaÃ§Ã£o/Login (LoginForm):
      1. OnFingerprintCaptured(template)
      2. BuscarBiometriasLocais() â†’ lÃª todas de Biometrias
      3. VerifyAgainstTemplate(template) â†’ compara com cada template local
      4. Se match encontrado â†’ registra ponto em Pontos
      5. Sincroniza com NEON em background

4. LOCALIZAÃ‡ÃƒO DO ARQUIVO DB:
   c:\Users\Gabriel Gomes\Documents\Sistema Desktop\bin\Release\net8.0-windows\win-x64\biometric.db

5. COMO VERIFICAR DADOS ARMAZENADOS:
   - Use SQLite Browser ou DBeaver
   - Abra o arquivo biometric.db
   - Veja as tabelas: Biometrias, Pontos, Setores
   - Template estÃ¡ armazenado como BLOB (dados binÃ¡rios)

6. SEGURANÃ‡A:
   - Templates nunca saem em texto claro
   - Hash SHA256 gerado para auditoria
   - SincronizaÃ§Ã£o via HTTPS (Neon)
   - Dados locais em SQLite (criptografia opcional)

7. SINCRONIZAÃ‡ÃƒO:
   - AutomÃ¡tica em background apÃ³s cada registro
   - Flag SyncedToNeon = 1 quando sincronizado
   - Retry automÃ¡tico se falhar
